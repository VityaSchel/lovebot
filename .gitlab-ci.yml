stages:
  - prepare
  - build
  - deploy

image: docker:${DOCKER_VERSION}
variables:
  DOCKER_BUILDKIT: 1
  DOCKER_VERSION: 20.10.17

.docker_init_template:
  - docker login -u $DOCKER_REGISTRY_USER -p $DOCKER_REGISTRY_PASSWORD $DOCKER_REGISTRY

.ssh_init_template:
  - mkdir -p ~/.ssh
  - echo "$SSH_PRIVATE_KEY" | tr -d '\r' > ~/.ssh/id_rsa
  - chmod 600 ~/.ssh/id_rsa
  - chmod 700 ~/.ssh
  - echo "$SSH_KNOWN_HOSTS" >> ~/.ssh/known_hosts
  - chmod 644 ~/.ssh/known_hosts
  - eval $(ssh-agent -s)
  - ssh-add ~/.ssh/id_rsa

install:
  stage: prepare
  services:
    - name: docker:${DOCKER_VERSION}-dind
      command: ["--registry-mirror", "https://proxy-registry.skidstor.com"]
  cache:
    - key:
        files:
          - yarn.lock
      paths:
        - node_modules
      policy: pull-push
  before_script:
    - !reference [.docker_init_template]
  script:
    - mkdir -p node_modules

    - >
      docker build
      --file docker/node/Dockerfile
      --target install
      --tag $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-install
      .

    - rm -rf node_modules

    - docker create --name node $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-install
    - docker cp node:/app/node_modules $CI_PROJECT_DIR/

.build_production_template:
  stage: build
  services:
    - name: docker:${DOCKER_VERSION}-dind
      command: ["--registry-mirror", "https://proxy-registry.skidstor.com"]
  cache:
    - key:
        files:
          - yarn.lock
      paths:
        - node_modules
      policy: pull
    - key: next-cache-${PROJECT_NAME}-${CI_COMMIT_REF_SLUG}
      paths:
        - .next/cache
      policy: pull-push
  before_script:
    - !reference [.docker_init_template]
  script:
    - mkdir -p .next/cache

    - >
      docker build
      --file docker/node/Dockerfile
      --build-arg BUILDKIT_INLINE_CACHE=1
      --cache-from $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
      --target builder
      --tag $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
      --build-arg NEXT_PUBLIC_BACKEND_URL=$NEXT_PUBLIC_BACKEND_URL
      --build-arg NEXT_PUBLIC_DATA_POLICY=$NEXT_PUBLIC_DATA_POLICY
      --build-arg NEXT_PUBLIC_TARIFFS=$NEXT_PUBLIC_TARIFFS
      --build-arg NEXT_PUBLIC_USER_AGREEMENT=$NEXT_PUBLIC_USER_AGREEMENT
      --build-arg NEXT_PUBLIC_CONTACT_EMAIL=$NEXT_PUBLIC_CONTACT_EMAIL
      --build-arg NEXT_PUBLIC_BOT_LINK=$NEXT_PUBLIC_BOT_LINK
      --build-arg NEXT_PUBLIC_TEXT_SECOND_CHECKBOX="$NEXT_PUBLIC_TEXT_SECOND_CHECKBOX"
      --build-arg NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES="$NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES"
      --build-arg NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES="$NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES"
      --build-arg NEXT_PUBLIC_COMPANY_NAME="$NEXT_PUBLIC_COMPANY_NAME"
      --build-arg NEXT_PUBLIC_COMPANY_INN=$NEXT_PUBLIC_COMPANY_INN
      --build-arg NEXT_PUBLIC_COMPANY_OGRNIP=$NEXT_PUBLIC_COMPANY_OGRNIP
      .

    - rm -rf .next/cache

    - docker create --name main_page $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
    - docker cp main_page:/app/.next/cache $CI_PROJECT_DIR/.next/cache

    - docker push $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
  rules:
    - if: $CI_COMMIT_BRANCH == "main"

.build_development_template:
  stage: build
  services:
    - name: docker:${DOCKER_VERSION}-dind
      command: ["--registry-mirror", "https://proxy-registry.skidstor.com"]
  cache:
    - key:
        files:
          - yarn.lock
      paths:
        - node_modules
      policy: pull
    - key: next-cache-${PROJECT_NAME}-${CI_COMMIT_REF_SLUG}
      paths:
        - .next/cache
      policy: pull-push
  before_script:
    - !reference [.docker_init_template]
  script:
    - mkdir -p .next/cache

    - >
      docker build
      --file docker/node/Dockerfile
      --build-arg BUILDKIT_INLINE_CACHE=1
      --cache-from $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
      --target builder
      --tag $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
      --build-arg NEXT_PUBLIC_BACKEND_URL=$NEXT_PUBLIC_BACKEND_URL
      --build-arg NEXT_PUBLIC_DATA_POLICY=$NEXT_PUBLIC_DATA_POLICY
      --build-arg NEXT_PUBLIC_TARIFFS=$NEXT_PUBLIC_TARIFFS
      --build-arg NEXT_PUBLIC_USER_AGREEMENT=$NEXT_PUBLIC_USER_AGREEMENT
      --build-arg NEXT_PUBLIC_CONTACT_EMAIL=$NEXT_PUBLIC_CONTACT_EMAIL
      --build-arg NEXT_PUBLIC_BOT_LINK=$NEXT_PUBLIC_BOT_LINK
      --build-arg NEXT_PUBLIC_TEXT_SECOND_CHECKBOX="$NEXT_PUBLIC_TEXT_SECOND_CHECKBOX"
      --build-arg NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES="$NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES"
      --build-arg NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES="$NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES"
      --build-arg NEXT_PUBLIC_COMPANY_NAME="$NEXT_PUBLIC_COMPANY_NAME"
      --build-arg NEXT_PUBLIC_COMPANY_INN=$NEXT_PUBLIC_COMPANY_INN
      --build-arg NEXT_PUBLIC_COMPANY_OGRNIP=$NEXT_PUBLIC_COMPANY_OGRNIP
      .

    - rm -rf .next/cache

    - docker create --name main_page $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
    - docker cp main_page:/app/.next/cache $CI_PROJECT_DIR/.next/cache

    - docker push $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
  rules:
    - if: $CI_COMMIT_BRANCH == "dev"

.deploy_production_template:
  stage: deploy
  environment:
    name: production-${PROJECT_NAME}
  variables:
    COMPOSE_PROJECT_NAME: ${PROJECT_NAME}_main_page
    LANDING_IMAGE: $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
    DOCKER_HOST: $DEPLOY_PROD_DOCKER_HOST
  before_script:
    - !reference [.ssh_init_template]
    - !reference [.docker_init_template]
  script:
    - docker compose pull main_page

    - docker compose up -d --wait
  rules:
    - if: $CI_COMMIT_BRANCH == "main"

.deploy_development_template:
  stage: deploy
  environment:
    name: production-${PROJECT_NAME}
  variables:
    COMPOSE_PROJECT_NAME: ${PROJECT_NAME}_main_page
    LANDING_IMAGE: $DOCKER_REGISTRY_PATH:$CI_COMMIT_REF_NAME-$PROJECT_NAME
    DOCKER_HOST: $DEPLOY_PROD_DOCKER_HOST
  before_script:
    - !reference [.ssh_init_template]
    - !reference [.docker_init_template]
  script:
    - docker compose pull main_page

    - docker compose up -d --wait
  rules:
    - if: $CI_COMMIT_BRANCH == "dev"

build_dietaquest:
  extends: .build_development_template
  variables:
    PROJECT_NAME: dietaquest
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Деревлев Александр Генадьевич
    NEXT_PUBLIC_COMPANY_INN: 101601117953
    NEXT_PUBLIC_COMPANY_OGRNIP: 322100000008640

build_xlovebotxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: xlovebotxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219


build_pay-love-botxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: pay-love-botxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_loverbotpayxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: loverbotpayxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_lovebotvkxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: lovebotvkxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_paylovebotxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: paylovebotxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_paylovebot1xyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: paylovebot1xyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Алевская Ульяна Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 190901248906
    NEXT_PUBLIC_COMPANY_OGRNIP: 322190000016507

build_loverbotingxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: loverbotingxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Алевская Ульяна Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 190901248906
    NEXT_PUBLIC_COMPANY_OGRNIP: 322190000016507

build_love-bot-vkxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: love-bot-vkxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Алевская Ульяна Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 190901248906
    NEXT_PUBLIC_COMPANY_OGRNIP: 322190000016507

build_lovelybotxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: lovelybotxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_mylovebotxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: mylovebotxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_loverzonexyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: loverzonexyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1sYwTbkGXuLIK1htnuSC6e7wPjF1p1YxVYbS9xUo312k/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 5 дня после получения пробного доступа, списывается 982 рублей за каждые 5 дней использования сервиса. В случае нехватки средств, спустя 6 часа, мы переведем вас на тариф со списаниями по 694 рублей за каждые 3 дня или 197 рублей за каждый день доступа к сервису.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 982 рублей за каждые 5 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 982 рублей за каждые 5 дней или 694 рублей за каждые 3 дня или 197 рублей за каждый день
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_loverpayxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: loverpayxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_findloverbotxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: findloverbotxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1m7SZ5kepX_GXIQAN_5QAVTt-HP0Ag8kX7lPPJ2PZG3I/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218248259
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 990 рублей за каждые 3 дня использования сервиса.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 990 рублей за каждые 3 дня
    NEXT_PUBLIC_COMPANY_NAME: ИП Алевская Ульяна Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 190901248906
    NEXT_PUBLIC_COMPANY_OGRNIP: 322190000016507

build_lovefunxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: lovefunxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1jc_JbshhIWceKkHtn7T0XqNjVbkDyf6LixcK0gGHEdY/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public217433372
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 7 дня после получения пробного доступа, списывается 2890 рублей за каждые 7 дней использования сервиса. В случае нехватки средств, спустя 6 часа, мы переведем вас на тариф со списаниями по 1690 рублей за каждые 3 дня или 690 рублей за каждый день доступа к сервису.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за каждые 7 дней
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за каждые 7 дней или 1690 рублей за каждые 3 дня или 690 рублей за каждый день
    NEXT_PUBLIC_COMPANY_NAME: ИП Алевская Ульяна Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 190901248906
    NEXT_PUBLIC_COMPANY_OGRNIP: 322190000016507

build_lovescaningxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: lovescaningxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1tVemhbMoyIqJA_FddYUxc39rf3oD23p8KpsVXfPq03Q/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public216833148
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 2890 рублей за каждые 14 дней использования сервиса. В случае нехватки средств, спустя 6 часа, мы переведем вас на тариф со списаниями по 1690 рублей за каждые 7 дней или 690 рублей за каждые 7 дней или 390 рублей за каждый день доступа к сервису.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за каждые 14 дней или 1690 рублей за каждые 7 дней или 690 рублей за каждые 7 дней или 390 рублей за каждый день
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_lovecrushxyz:
  extends: .build_production_template
  variables:
    PROJECT_NAME: lovecrushxyz
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1tVemhbMoyIqJA_FddYUxc39rf3oD23p8KpsVXfPq03Q/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public216833148
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 2890 рублей за каждые 14 дней использования сервиса. В случае нехватки средств, спустя 6 часа, мы переведем вас на тариф со списаниями по 1690 рублей за каждые 7 дней или 690 рублей за каждые 7 дней или 390 рублей за каждый день доступа к сервису.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 2890 рублей за каждые 14 дней или 1690 рублей за каждые 7 дней или 690 рублей за каждые 7 дней или 390 рублей за каждый день
    NEXT_PUBLIC_COMPANY_NAME: ИП Жигульских Анастасия Сергеевна
    NEXT_PUBLIC_COMPANY_INN: 360601215399
    NEXT_PUBLIC_COMPANY_OGRNIP: 322366800070219

build_loverbotinfo:
  extends: .build_production_template
  variables:
    PROJECT_NAME: loverbotinfo
    NEXT_PUBLIC_BACKEND_URL: https://api.paylovebot.xyz
    NEXT_PUBLIC_DATA_POLICY: https://docs.google.com/document/d/11ntwB7fqvLM1RYB1-W0y4046AkH3e8qhNb3qyWWETo8/edit?usp=sharing
    NEXT_PUBLIC_TARIFFS: https://docs.google.com/document/d/1hxyhmBkoz-IyYzChuU8CLHx1WgUyyrtSv23uLyaOS1k/edit?usp=sharing
    NEXT_PUBLIC_USER_AGREEMENT: https://docs.google.com/document/d/1wUCaCHZGo42OHUtUZcL2e1y80lrDDIext-Qs7N5UFZw/edit?usp=sharing
    NEXT_PUBLIC_CONTACT_EMAIL: promohelper@proton.me
    NEXT_PUBLIC_BOT_LINK: vk.me/public218458904
    NEXT_PUBLIC_TEXT_SECOND_CHECKBOX: составит 1 рубль за получение пробного доступа. В дальнейшем, через 3 дня после получения пробного доступа, списывается 1784 рублей за каждые 14 дней использования сервиса. В случае нехватки средств, спустя 6 часа, мы переведем вас на тариф со списаниями по 896 рублей за каждые 7 дней или 583 рублей за каждые 4 дня или 194 рублей за каждый день доступа к сервису.
    NEXT_PUBLIC_MAIN_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 1784 рублей за кажные 3 дня
    NEXT_PUBLIC_PAY_PAGE_TEXT_SUBSCRIPTION_PRICES: Далее 1784 рублей за каждые 14 дней или 896 рублей за каждые 7 дней или 583 рублей за каждые 4 дня или 194 рублей за каждый день
    NEXT_PUBLIC_COMPANY_NAME: ИП Андреев Максим Дмитриевич
    NEXT_PUBLIC_COMPANY_INN: 47514963896
    NEXT_PUBLIC_COMPANY_OGRNIP: 322470400100605

deploy_production_dietaquest:
  extends: .deploy_development_template
  variables:
    PROJECT_NAME: dietaquest
    VIRTUAL_HOST: dieta.quest

deploy_production_xlovebotxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: xlovebotxyz
    VIRTUAL_HOST: xlovebot.xyz

deploy_production_pay-love-botxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: pay-love-botxyz
    VIRTUAL_HOST: pay-love-bot.xyz

deploy_production_loverbotpayxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: loverbotpayxyz
    VIRTUAL_HOST: loverbotpay.xyz

deploy_production_lovebotvkxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: lovebotvkxyz
    VIRTUAL_HOST: lovebotvk.xyz

deploy_production_paylovebotxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: paylovebotxyz
    VIRTUAL_HOST: paylovebot.xyz

deploy_production_paylovebot1xyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: paylovebot1xyz
    VIRTUAL_HOST: paylovebot1.xyz

deploy_production_loverbotingxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: loverbotingxyz
    VIRTUAL_HOST: lover-boting.xyz

deploy_production_love-bot-vkxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: love-bot-vkxyz
    VIRTUAL_HOST: love-bot-vk.xyz

deploy_production_lovelybotxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: lovelybotxyz
    VIRTUAL_HOST: lovelybot.xyz

deploy_production_mylovebotxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: mylovebotxyz
    VIRTUAL_HOST: mylovebot.xyz

deploy_production_loverzonexyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: loverzonexyz
    VIRTUAL_HOST: loverzone.xyz

deploy_production_loverpayxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: loverpayxyz
    VIRTUAL_HOST: loverpay.xyz

deploy_production_findloverbotxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: findloverbotxyz
    VIRTUAL_HOST: findloverbot.xyz

deploy_production_lovefunxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: lovefunxyz
    VIRTUAL_HOST: love-fun.xyz

deploy_production_lovescaningxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: lovescaningxyz
    VIRTUAL_HOST: lovescaning.xyz

deploy_production_lovecrushxyz:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: lovecrushxyz
    VIRTUAL_HOST: lovecrush.xyz

deploy_production_loverbotinfo:
  extends: .deploy_production_template
  variables:
    PROJECT_NAME: loverbotinfo
    VIRTUAL_HOST: loverbot.info